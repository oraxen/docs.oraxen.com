# Resource Pack Merging Guide

Oraxen provides a powerful system to merge multiple resource packs into a single cohesive pack. You can merge packs using two methods. **ZIP file uploads** or **direct folder structure**. Both methods are processed automatically during pack generation.

---

## Overview

When Oraxen generates the resource pack, it merges files from multiple sources in a specific order.

1. **Default Oraxen assets** (built-in textures, models, fonts, etc.)
2. **Direct folder structure** (`Oraxen/pack/assets/`, `Oraxen/pack/textures/`, etc.)
3. **Uploaded ZIP packs** (`Oraxen/pack/uploads/`)

This allows you to.
- Add custom textures and models
- Override default behavior
- Combine multiple community packs
- Manage priorities easily

---

## ZIP Upload System

### Quick Start

1. Place your resource pack ZIP files in **`Oraxen/pack/uploads/`**
2. Reload or restart the server
3. Files are automatically merged into the final pack

### Directory Structure

```
plugins/Oraxen/
├── pack/
│   ├── uploads/
│   │   ├── 01_base_textures.zip      ← Processed first
│   │   ├── 02_custom_models.zip      ← Processed second
│   │   └── 99_overlay_pack.zip       ← Processed last (highest priority)
│   ├── assets/
│   ├── textures/
│   ├── models/
│   ├── sounds/
│   └── pack.zip                       ← Final merged pack
```

### Priority System

ZIP files are processed **alphabetically by filename**. The last file processed wins in case of conflicts.

**Example**
```
uploads/
├── 0_base_pack.zip          (contains: texture.png, model.json)
├── 1_custom_pack.zip        (contains: texture.png, new_item.json)
└── 2_override_pack.zip      (contains: texture.png)
```

**Processing Order & Result**

1. `0_base_pack.zip` → texture.png added
2. `1_custom_pack.zip` → texture.png **overrides** v1, new_item.json added
3. `2_override_pack.zip` → texture.png **overrides** v2

**Final Pack Contains**
- `texture.png` from `2_override_pack.zip`
- `model.json` from `0_base_pack.zip`
- `new_item.json` from `1_custom_pack.zip`

### Console Outputs

#### Normal Merge (No Conflicts)
```
[14:32:35 INFO] Oraxen | Processing pack | base_textures.zip
[14:32:35 INFO] Oraxen | Added 45 files from base_textures.zip
```

#### With File Overrides
```
[14:32:36 INFO] Oraxen | Processing pack | custom_overlay.zip
[14:32:36 WARN] Oraxen | custom_overlay.zip will override existing file assets/minecraft/textures/gui/window.png from base_textures.zip
[14:32:36 INFO] Oraxen | Added 12 new files, 8 overrides from custom_overlay.zip
```

#### Final Summary
```
[14:32:37 INFO] Oraxen | Merged 156 files from 3 uploaded pack(s)
```

---

## Direct Folder Structure

### Quick Start

1. Place your resource pack files directly in **`Oraxen/pack/assets/`** or **`Oraxen/pack/`** folders
2. Reload or restart the server
3. Files are automatically merged into the final pack

### Benefits (compared to ZIP Uploads)
- Persistent customizations
- Development and iteration
- Avoiding repeated uploads

### Directory Structure

```
plugins/Oraxen/
└── pack/
    ├── assets/                    ← Direct resource pack files
    │   ├── minecraft/
    │   │   ├── textures/
    │   │   ├── models/
    │   │   ├── lang/
    │   │   └── sounds/
    │   └── [custom_namespace]/
    ├── textures/                  ← Alternative: flat structure
    ├── models/
    ├── sounds/
    ├── lang/
    ├── pack.mcmeta
    ├── pack.png
    └── uploads/                   ← ZIP files go here
```

### Priority System

Direct folder files override defaults, but can be overridden by uploaded ZIPs. Files in the same source are processed in folder structure order.

**Example**
```
Defaults (Minecraft)
├── assets/minecraft/textures/block/dirt.png
├── assets/minecraft/models/block/stone.json
└── assets/minecraft/textures/item/sword.png

Direct Folders (pack/)
├── assets/minecraft/textures/block/dirt.png        ← Different version
└── assets/minecraft/textures/item/axe.png          ← New file

Uploaded ZIPs (pack/uploads/)
├── 01_base_pack.zip       (contains: sword.png)
└── 02_override_pack.zip   (contains: dirt.png)
```

**Processing Order & Result**

1. Oraxen defaults → dirt.png, stone.json, sword.png loaded
2. Direct folders → dirt.png **overrides** default, axe.png added
3. `01_base_pack.zip` → sword.png **overrides** default version
4. `02_override_pack.zip` → dirt.png **overrides** direct folder version

**Final Pack Contains**
- `dirt.png` from `02_override_pack.zip`
- `stone.json` from Oraxen defaults
- `sword.png` from `01_base_pack.zip`
- `axe.png` from direct folder
---
## Priority

```
1. Oraxen Default Assets
   ↓ (can be overridden by)
2. pack/assets/              (direct folder)
   pack/textures/            (alternative structure)
   pack/models/
   pack/sounds/
   etc.
   ↓ (can be overridden by)
3. pack/uploads/01_*.zip     (alphabetically first)
   pack/uploads/02_*.zip
   ...
   pack/uploads/99_*.zip     (alphabetically last = highest priority)
```

### How Conflicts Are Resolved

When the same file path appears in multiple sources.
- **Direct folders override defaults**
- **ZIP packs override direct folders**
- **Later ZIP files (alphabetically) override earlier ones**

**Example**

- `Oraxen/pack/assets/minecraft/textures/block/dirt.png` (direct)
- `Oraxen/pack/uploads/custom_pack.zip` (contains `assets/minecraft/textures/block/dirt.png`)

**Result |** File from `custom_pack.zip` is used (ZIP has higher priority)

