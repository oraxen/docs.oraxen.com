---
description: Complete reference for text_effects.yml configuration
icon: sparkles
---

# Text Effects Configuration Reference

Complete guide to configuring text effects in `text_effects.yml` - shader-based text animations for Minecraft 1.21.1+.

## Overview

Text effects use GLSL shaders to create animated text in chat, titles, signs, and other text contexts. Effects are triggered using MiniMessage format tags.

**Location:** `plugins/Oraxen/text_effects.yml`

**Minecraft Version:** 1.21.1+ (1.21.11+ recommended)

**Usage Example:**
```
<effect:rainbow>Rainbow text!</effect>
<effect:wave>Wavy text</effect>
```

---

## File Structure

```yaml
version: 1  # File format version

shared:
  fragment_prelude: |
    // Shared GLSL code inserted before main() in all fragment shaders
    // Define helper functions here (e.g., hsv2rgb)

effects:
  effect_name:
    id: 0                    # Effect ID (0-7) - auto-assigned if omitted
    enabled: true            # Enable/disable this effect
    trigger_color: "#FF5500" # Hex color that triggers the effect
    description: "Effect description"  # Shown in /oraxen texteffects
    snippets:
      - fragment: |          # Fragment shader code (colors, opacity)
          // GLSL code here
        vertex: |            # Vertex shader code (position, movement)
          // GLSL code here
```

---

## Effect Configuration

### Basic Properties

#### id
```yaml
rainbow:
  id: 0  # Optional - auto-assigned if omitted
```

**Type:** Integer (0-7)

**Auto-assignment:**
- If omitted, IDs are assigned in file order (0, 1, 2, ...)
- Explicit IDs are reserved first, then auto-assignment fills gaps
- You can mix explicit and auto IDs

**Limitations:**
- Maximum 8 effects (IDs 0-7)
- Each ID must be unique

**Example:**
```yaml
effects:
  rainbow:
    id: 0  # Explicit
  wave:
    id: 1  # Explicit
  shake:
    # Auto-assigned ID 2
  custom:
    id: 5  # Explicit, skipping 3 and 4
  pulse:
    # Auto-assigned ID 3 (fills first gap)
```

#### enabled
```yaml
rainbow:
  enabled: true  # Enable this effect
```

**Type:** Boolean

**When false:**
- Effect is not available in-game
- Trigger color is not assigned
- `/oraxen texteffects` won't show it

**Use case:** Temporarily disable effects without deleting them.

#### trigger_color
```yaml
rainbow:
  trigger_color: "#FD0D00"  # Hex color that triggers the effect
```

**Type:** Hex color string (e.g., "#FF5500")

**Auto-generation:**
- If omitted, defaults to `#FDxD00` where `x` is the effect ID
- Example: ID 0 → `#FD0D00`, ID 1 → `#FD1D00`, ID 2 → `#FD2D00`

**How it works:**
- When text has exactly this color, the shader applies the effect
- Uses 24-bit exact matching (very unlikely to conflict with gradients)
- The base color is replaced by the effect's color logic

**Important:**
- Don't use your trigger color in regular text (it will activate the effect)
- Each effect must have a unique trigger color
- The color doesn't need to be human-friendly (it's internal)

**Custom colors:**
```yaml
rainbow:
  trigger_color: "#FF0001"  # Custom trigger
wave:
  trigger_color: "#00FF01"  # Different custom trigger
```

#### description
```yaml
rainbow:
  description: "Cycles through rainbow colors over time"
```

**Type:** String

**Usage:**
- Shown in `/oraxen texteffects` command
- Helps players understand what each effect does
- Optional but recommended

---

## GLSL Shader Snippets

### Available Shader Types

#### fragment
Controls color and opacity.

```yaml
snippets:
  - fragment: |
      texColor.rgb = vec3(1.0, 0.0, 0.0);  // Set to red
      texColor.a *= 0.5;                    // 50% opacity
```

**Available variables:**
- `texColor` - The current text color (vec4: r, g, b, a)
- `timeSeconds` - Current time in seconds (for animation)
- `charIndex` - Character index in the text (0, 1, 2, ...)

**Common operations:**
- `texColor.rgb = vec3(r, g, b)` - Set RGB color
- `texColor.a = opacity` - Set opacity (0.0 = invisible, 1.0 = solid)
- `texColor.a *= multiplier` - Multiply opacity

#### vertex
Controls position and movement.

```yaml
snippets:
  - vertex: |
      pos.y += sin(timeSeconds) * 2.0;  // Move up and down
      pos.x += charIndex * 0.5;          // Offset each character
```

**Available variables:**
- `pos` - Character position (vec3: x, y, z)
- `timeSeconds` - Current time in seconds
- `charIndex` - Character index

**Common operations:**
- `pos.y += offset` - Move vertically
- `pos.x += offset` - Move horizontally
- `sin(timeSeconds)` - Sine wave animation
- `cos(timeSeconds)` - Cosine wave animation

---

## Built-in Effects

### rainbow
Cycles through rainbow colors.

```yaml
rainbow:
  enabled: true
  description: "Cycles through rainbow colors over time"
  snippets:
    - fragment: |
        float hue = fract(charIndex * 0.03 + timeSeconds * 0.09);
        texColor.rgb = hsv2rgb(vec3(hue, 0.9, 1.0));
```

**How it works:**
- `charIndex * 0.03` - Each character has different hue
- `timeSeconds * 0.09` - Hue shifts over time
- `hsv2rgb()` - Converts HSV to RGB

**Usage:** `<effect:rainbow>Rainbow text</effect>`

### wave
Vertical sine wave motion.

```yaml
wave:
  enabled: true
  description: "Vertical sine wave motion"
  snippets:
    - fragment: |
        texColor.rgb = vec3(0.333, 0.804, 0.988);  // Blue color
      vertex: |
        float phase = charIndex * 0.6 + timeSeconds * 6.0;
        pos.y += sin(phase) * 2.0;
```

**How it works:**
- `charIndex * 0.6` - Each character at different wave position
- `timeSeconds * 6.0` - Wave moves over time
- `sin(phase) * 2.0` - Vertical displacement (amplitude 2 pixels)

**Usage:** `<effect:wave>Wavy text</effect>`

### shake
Random jitter/shake effect.

```yaml
shake:
  enabled: true
  description: "Random jitter"
  snippets:
    - fragment: |
        texColor.rgb = vec3(1.0, 0.42, 0.42);  // Red color
      vertex: |
        float seed = charIndex + floor(timeSeconds * 32.0);
        pos.x += (fract(sin(seed * 12.9898) * 43758.5453) - 0.5) * 1.5;
        pos.y += (fract(sin(seed * 78.233) * 43758.5453) - 0.5) * 1.5;
```

**How it works:**
- `floor(timeSeconds * 32.0)` - Updates 32 times per second
- `fract(sin(seed * constant) * largeNumber)` - Pseudo-random value
- `- 0.5` - Centers random value (-0.5 to 0.5)
- `* 1.5` - Shake amplitude

**Usage:** `<effect:shake>Shaky text</effect>`

### pulse
Opacity fade in/out.

```yaml
pulse:
  enabled: true
  description: "Opacity fades in/out"
  snippets:
    - fragment: |
        texColor.rgb = vec3(1.0, 0.85, 0.24);  // Yellow color
        float pulse = (sin(timeSeconds * 1.5 + charIndex * 0.3) + 1.0) * 0.5;
        texColor.a *= 0.3 + pulse * 0.7;
```

**How it works:**
- `sin(timeSeconds * 1.5)` - Sine wave for pulsing
- `+ 1.0) * 0.5` - Normalize to 0.0-1.0 range
- `0.3 + pulse * 0.7` - Opacity ranges from 0.3 to 1.0

**Usage:** `<effect:pulse>Pulsing text</effect>`

---

## Shared Code

### fragment_prelude

Shared GLSL functions available to all effects.

```yaml
shared:
  fragment_prelude: |
    // HSV to RGB conversion
    vec3 hsv2rgb(vec3 c) {
        vec4 K = vec4(1.0, 2.0/3.0, 1.0/3.0, 3.0);
        vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);
        return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);
    }

    // Add more helper functions here
```

**Usage:**
- Define reusable functions once
- Available in all fragment shaders
- Keeps effect code clean and DRY

**Example - Adding a color function:**
```yaml
shared:
  fragment_prelude: |
    vec3 hsv2rgb(vec3 c) {
        vec4 K = vec4(1.0, 2.0/3.0, 1.0/3.0, 3.0);
        vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);
        return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);
    }

    // Custom gradient function
    vec3 gradient(float t, vec3 color1, vec3 color2) {
        return mix(color1, color2, t);
    }
```

Then use in effects:
```yaml
custom_gradient:
  snippets:
    - fragment: |
        float t = fract(charIndex * 0.1 + timeSeconds * 0.2);
        texColor.rgb = gradient(t, vec3(1.0, 0.0, 0.0), vec3(0.0, 0.0, 1.0));
```

---

## Creating Custom Effects

### Simple Color Change

```yaml
effects:
  green:
    enabled: true
    description: "Green text"
    snippets:
      - fragment: |
          texColor.rgb = vec3(0.0, 1.0, 0.0);  // RGB green
```

### Animated Color Cycle

```yaml
effects:
  color_cycle:
    enabled: true
    description: "Cycles between red and blue"
    snippets:
      - fragment: |
          float cycle = (sin(timeSeconds * 2.0) + 1.0) * 0.5;  // 0.0 to 1.0
          texColor.r = 1.0 - cycle;  // Red fades out
          texColor.b = cycle;        // Blue fades in
          texColor.g = 0.0;          // No green
```

### Bounce Animation

```yaml
effects:
  bounce:
    enabled: true
    description: "Characters bounce up and down"
    snippets:
      - vertex: |
          float delay = charIndex * 0.2;  // Stagger bounce per character
          float bounce = abs(sin((timeSeconds - delay) * 3.0)) * 3.0;
          pos.y += bounce;
```

### Spinning Text

```yaml
effects:
  spin:
    enabled: true
    description: "Slowly rotating characters"
    snippets:
      - vertex: |
          float angle = timeSeconds * 0.5 + charIndex * 0.3;
          float radius = 2.0;
          pos.x += cos(angle) * radius;
          pos.y += sin(angle) * radius;
```

### Glitch Effect

```yaml
effects:
  glitch:
    enabled: true
    description: "Random glitchy displacement"
    snippets:
      - fragment: |
          // Random color shift
          float r = fract(sin(timeSeconds * 100.0 + charIndex) * 43758.5);
          if (r > 0.95) {
            texColor.rgb = vec3(1.0, 0.0, 0.0);  // Occasional red flash
          }
      vertex: |
          // Random displacement
          float glitch = fract(sin(floor(timeSeconds * 20.0) + charIndex) * 43758.5);
          if (glitch > 0.9) {
            pos.x += (fract(sin(charIndex) * 43758.5) - 0.5) * 5.0;
          }
```

---

## GLSL Reference

### Built-in Functions

**Trigonometry:**
- `sin(x)` - Sine function
- `cos(x)` - Cosine function
- `tan(x)` - Tangent function

**Math:**
- `abs(x)` - Absolute value
- `floor(x)` - Round down
- `ceil(x)` - Round up
- `fract(x)` - Fractional part (x - floor(x))
- `mod(x, y)` - Modulo
- `min(x, y)` - Minimum
- `max(x, y)` - Maximum
- `clamp(x, min, max)` - Clamp between min and max
- `mix(a, b, t)` - Linear interpolation (a * (1-t) + b * t)

**Vector:**
- `length(v)` - Vector length
- `normalize(v)` - Unit vector
- `dot(a, b)` - Dot product

### Variable Types

- `float` - Single number
- `vec2` - 2D vector (x, y)
- `vec3` - 3D vector (x, y, z) or RGB color
- `vec4` - 4D vector (x, y, z, w) or RGBA color

### Time-based Animation

```glsl
// Smooth oscillation (0.0 to 1.0)
float wave = (sin(timeSeconds * speed) + 1.0) * 0.5;

// Saw wave (0.0 to 1.0 repeating)
float saw = fract(timeSeconds * speed);

// Stepped animation
float step = floor(timeSeconds * stepsPerSecond);
```

### Character-based Variation

```glsl
// Different value per character
float offset = charIndex * 0.1;

// Staggered animation
float stagger = charIndex * 0.3;
float anim = sin((timeSeconds - stagger) * speed);

// Group characters
float group = floor(charIndex / 3.0);  // Groups of 3
```

---

## Troubleshooting

### "Effect not working"

**Check:**
1. `enabled: true` in text_effects.yml
2. Minecraft version 1.21.1+ (1.21.11+ recommended)
3. TextEffects enabled in settings.yml:
```yaml
TextEffects:
  enabled: true
```
4. Reload: `/oraxen reload all`

### "Shader compilation error"

**Common issues:**
- Missing semicolon `;` at end of lines
- Undefined variable (check spelling: `texColor` not `textColor`)
- Using vertex variables in fragment shader (or vice versa)
- GLSL syntax errors (check console for error messages)

### "Effect triggers randomly"

**Cause:** Trigger color appearing in regular text/gradients

**Solution:**
- Choose more unique trigger colors
- Use default auto-generated colors (`#FDxD00` pattern)
- Avoid using trigger colors in normal messages

### "Effect ID conflicts"

**Cause:** Duplicate IDs or too many effects (max 8)

**Solution:**
```yaml
# Remove or disable one effect
old_effect:
  enabled: false

# Or assign explicit IDs to prevent conflicts
effect1:
  id: 0
effect2:
  id: 1
```

### "Text invisible/black"

**Cause:** `texColor.a = 0.0` or `texColor.rgb = vec3(0.0, 0.0, 0.0)`

**Solution:**
Ensure you're setting visible colors:
```glsl
texColor.rgb = vec3(1.0, 1.0, 1.0);  // White (always visible)
texColor.a = 1.0;  // Fully opaque
```

---

## Performance Considerations

### Optimization Tips

**Lightweight effects:**
- Fragment-only (no vertex movement)
- Simple math operations
- Avoid complex calculations per character

**Example - Efficient:**
```yaml
simple_red:
  snippets:
    - fragment: |
        texColor.rgb = vec3(1.0, 0.0, 0.0);
```

**Example - Heavy:**
```yaml
complex:
  snippets:
    - fragment: |
        // Avoid heavy loops or many calculations
        for (int i = 0; i < 100; i++) {  // BAD
          texColor.rgb += someCalculation(i);
        }
      vertex: |
        // Complex vertex manipulation every frame
```

### Client Performance

Effects run on client GPUs:
- Modern GPUs: Can handle complex effects easily
- Older/integrated GPUs: May struggle with heavy shader effects
- Mobile devices: Keep effects simple

**Recommendation:** Test on lower-end hardware if targeting broad audience.

---

## See Also

- [Text Effects Overview](./index) - Introduction and basic usage
- [GLSL Customization](./glsl-customization) - Advanced shader programming
- [Plugin Settings](../../plugin-setup/plugin-settings) - Enable/disable text effects globally
- [Branding Customization](../../configuration/branding-customization) - Using effects in messages
