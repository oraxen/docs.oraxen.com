# Text Effects

import { Callout } from 'nextra/components'

Text effects are shader-based visual effects that can be applied to any text in Minecraft. Unlike animated glyphs which swap between sprite frames, text effects modify how existing characters render (color, position, opacity) using GLSL shaders.

<Callout type="info">
Text effects require Minecraft 1.21.4+ and Oraxen's resource pack with shaders enabled.
</Callout>

## Quick Start

Apply text effects using MiniMessage tags:

```
<effect:rainbow>This text is rainbow!</effect>
<effect:wave>Wavy text here</effect>
<effect:shake>Shaking text!</effect>
```

These tags work anywhere MiniMessage is supported - item names, lore, chat, signs, etc.

## Configuration

Text effects are configured in two files:
- **`settings.yml`** - Master toggle and shader settings
- **`text_effects.yml`** - Effect definitions and GLSL snippets

### settings.yml

```yaml filename="settings.yml"
TextEffects:
  enabled: true                    # Master toggle for all text effects
  shader:
    template: auto                 # auto, effects_only, animated_only
  effects:                         # Optional: override enabled state per effect
    rainbow:
      enabled: true
    wave:
      enabled: false               # Disable specific effects
```

### text_effects.yml

Effects are defined with their visual behavior baked directly into the GLSL snippets:

```yaml filename="text_effects.yml"
version: 1

# Shared GLSL code available to all effects
shared:
  fragment_prelude: |
    vec3 hsv2rgb(vec3 c) {
        vec4 K = vec4(1.0, 2.0/3.0, 1.0/3.0, 3.0);
        vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);
        return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);
    }

effects:
  rainbow:
    # id: 0                        # Optional - auto-assigned if omitted
    enabled: true
    # trigger_color: "#FD0D00"     # Optional - defaults to #FDxD00
    description: Cycles through rainbow colors over time
    snippets:
      - fragment: |
          float hue = fract(charIndex * 0.03 + timeSeconds * 0.09);
          texColor.rgb = hsv2rgb(vec3(hue, 0.9, 1.0));
```

### Configuration Options

| Option | Description | Values |
|--------|-------------|--------|
| `enabled` | Master toggle for all text effects | `true` / `false` |
| `shader.template` | Which shaders to generate | `auto`, `effects_only`, `animated_only` |

### Effect Options

| Option | Description | Default |
|--------|-------------|---------|
| `id` | Numeric effect ID (0-7) | Auto-assigned in order |
| `enabled` | Whether the effect is available | `true` |
| `trigger_color` | Hex color the shader matches | `#FDxD00` (x = id) |
| `description` | Shown in `/oraxen texteffects` | — |
| `snippets` | GLSL code for the effect | — |

### Shader Templates

- **`auto`**: Generates shaders for both text effects and animated glyphs (recommended)
- **`effects_only`**: Only generates text effect shaders
- **`animated_only`**: Only generates animated glyph shaders

## Built-in Effects

| Effect | Description |
|--------|-------------|
| `rainbow` | Cycles through hue colors over time |
| `wave` | Vertical sine wave motion |
| `shake` | Random jitter/shake |
| `pulse` | Opacity fades in and out |

All effect parameters (speed, amplitude, colors) are defined in `text_effects.yml` and baked into the shader at resource pack generation time.

## Commands

Test effects in-game with these commands:

```
/oraxen texteffects              # List all available effects
/oraxen texteffect <effect> <text>   # Apply effect to text
```

### Examples

```
/oraxen texteffect rainbow Hello World!
/oraxen texteffect wave Wavy Text
/oraxen texteffect shake Very Shaky!
```

<Callout>
Permission required: `oraxen.command.texteffect`
</Callout>

## How It Works

Text effects use a trigger color system to avoid false positives from gradient colors:

1. Each effect has a unique **trigger color** (e.g., `#FD0D00` for rainbow)
2. Text is rendered with a dedicated **effect font** (e.g., `oraxen:effect/0`)
3. The shader matches the exact trigger color and applies the effect

This ensures only intentionally styled text triggers effects - normal colored text is never affected.

### Trigger Colors

Default trigger colors follow the pattern `#FDxD00` where `x` is the effect ID:

| Effect | ID | Default Trigger Color |
|--------|----|-----------------------|
| rainbow | 0 | `#FD0D00` |
| wave | 1 | `#FD1D00` |
| shake | 2 | `#FD2D00` |
| pulse | 3 | `#FD3D00` |

You can customize trigger colors in `text_effects.yml` if needed.

## Compatibility Notes

<Callout type="warning">
Text effects may conflict with other resource packs that modify Minecraft's text shaders (`rendertype_text.vsh`, `rendertype_text.fsh`). If you use multiple packs that edit shaders, use the pack merge system and ensure shader files are merged correctly.
</Callout>

### Known Limitations

- Effects are rendered client-side via shaders
- Shadows are hidden for text with effects to avoid visual artifacts
- 8 effect slots available (IDs 0-7)
- Character index derived from `gl_VertexID` in shader

### Minecraft Version Support

| Version | Support |
|---------|---------|
| 1.21.4+ | Full support |
| Below 1.21.4 | Not supported |
